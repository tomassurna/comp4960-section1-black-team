{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";var TimeEditor=/*#__PURE__*/function(_React$Component){_inherits(TimeEditor,_React$Component);var _super=_createSuper(TimeEditor);function TimeEditor(props){var _this;_classCallCheck(this,TimeEditor);_this=_super.call(this,props);_this.alreadySaving=false;_this.updateHourSelected=_this.updateHourSelected.bind(_assertThisInitialized(_this));_this.updateMinuteSelected=_this.updateMinuteSelected.bind(_assertThisInitialized(_this));_this.updateSelectedTimePeriod=_this.updateSelectedTimePeriod.bind(_assertThisInitialized(_this));_this.triggerSave=_this.triggerSave.bind(_assertThisInitialized(_this));_this.handleBlur=_this.handleBlur.bind(_assertThisInitialized(_this));_this.state={selectedTime:props.defaultValue||\"\",selectedHour:(props.defaultValue||\"\").split(\":\")[0],selectedMinute:(props.defaultValue||\"\").split(\":\")[1],timePeriod:parseInt((props.defaultValue||\"\").split(\":\")[0])<10?\"AM\":\"PM\"};return _this;}_createClass(TimeEditor,[{key:\"updateHourSelected\",value:function updateHourSelected(event){this.setState({selectedTime:event.target.value+\":\"+this.state.selectedMinute+\":00\",selectedHour:event.target.value});}},{key:\"updateMinuteSelected\",value:function updateMinuteSelected(event){this.setState({selectedTime:this.state.selectedHour+\":\"+event.target.value+\":00\",selectedMinute:event.target.value});}},{key:\"updateSelectedTimePeriod\",value:function updateSelectedTimePeriod(event){this.setState({timePeriod:event.target.value,selectedTime:event.target.value===\"AM\"?\"06:00:00\":\"12:00:00\"});}},{key:\"triggerSave\",value:function triggerSave(){if(this.alreadySaving){return;}this.alreadySaving=true;this.props.onUpdate(this.state.selectedTime);this.alreadySaving=false;}},{key:\"focus\",value:function focus(){this.nameInput.focus();}},{key:\"componentDidMount\",value:function componentDidMount(){this.nameInput.focus();}},{key:\"getHourOptions\",value:function getHourOptions(timePeriod){var start=timePeriod===\"AM\"?6:12;var end=timePeriod===\"AM\"?12:22;var options=[];for(var i=start;i<end;i++){var time=i<10?\"0\"+i:i;options.push(/*#__PURE__*/React.createElement(\"option\",{key:time,value:time},i>=13?i%13+1:i));}return options;}// From https://gist.github.com/pstoica/4323d3e6e37e8a23dd59\n},{key:\"handleBlur\",value:function handleBlur(event){var _this2=this;var currentTarget=event.currentTarget;// Check the newly focused element in the next tick of the event loop\nsetTimeout(function(){// Check if the new activeElement is a child of the original container\nif(!currentTarget.contains(document.activeElement)){// You can invoke a callback or add custom logic here\n_this2.triggerSave();}},0);}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{tabIndex:\"1\",style:{display:\"flex\"},ref:function ref(input){_this3.nameInput=input;},onBlur:this.handleBlur,onKeyDown:this.triggerSave},/*#__PURE__*/React.createElement(\"select\",{className:\"form-control editor edit-select\",value:this.state.selectedHour||\"\",onChange:this.updateHourSelected,onKeyDown:this.triggerSave},this.getHourOptions(this.state.timePeriod)),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control editor edit-select\",value:this.state.selectedMinute||\"\",onChange:this.updateMinuteSelected,onKeyDown:this.triggerSave},/*#__PURE__*/React.createElement(\"option\",{key:\"00\",value:\"00\"},\"00\"),/*#__PURE__*/React.createElement(\"option\",{key:\"15\",value:\"15\"},\"15\"),/*#__PURE__*/React.createElement(\"option\",{key:\"30\",value:\"30\"},\"30\"),/*#__PURE__*/React.createElement(\"option\",{key:\"45\",value:\"45\"},\"45\")),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control editor edit-select\",value:this.state.timePeriod||\"\",onChange:this.updateSelectedTimePeriod,onKeyDown:this.triggerSave},/*#__PURE__*/React.createElement(\"option\",{key:\"AM\",value:\"AM\"},\"AM\"),/*#__PURE__*/React.createElement(\"option\",{key:\"PM\",value:\"PM\"},\"PM\")));}}]);return TimeEditor;}(React.Component);export default TimeEditor;","map":{"version":3,"sources":["C:/Users/wangm1/comp4960-section1-black-team/comp4960-section1-black-team/src/client/src/pages/calendar/TimeEditor.js"],"names":["React","TimeEditor","props","alreadySaving","updateHourSelected","bind","updateMinuteSelected","updateSelectedTimePeriod","triggerSave","handleBlur","state","selectedTime","defaultValue","selectedHour","split","selectedMinute","timePeriod","parseInt","event","setState","target","value","onUpdate","nameInput","focus","start","end","options","i","time","push","currentTarget","setTimeout","contains","document","activeElement","display","input","getHourOptions","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nclass TimeEditor extends React.Component {\r\n    alreadySaving = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.updateHourSelected = this.updateHourSelected.bind(this);\r\n        this.updateMinuteSelected = this.updateMinuteSelected.bind(this);\r\n        this.updateSelectedTimePeriod = this.updateSelectedTimePeriod.bind(this);\r\n        this.triggerSave = this.triggerSave.bind(this);\r\n        this.handleBlur = this.handleBlur.bind(this);\r\n        this.state = {\r\n            selectedTime: props.defaultValue || \"\",\r\n            selectedHour: (props.defaultValue || \"\").split(\":\")[0],\r\n            selectedMinute: (props.defaultValue || \"\").split(\":\")[1],\r\n            timePeriod:\r\n                parseInt((props.defaultValue || \"\").split(\":\")[0]) < 10 ? \"AM\" : \"PM\",\r\n        };\r\n    }\r\n\r\n    updateHourSelected(event) {\r\n        this.setState({\r\n            selectedTime: event.target.value + \":\" + this.state.selectedMinute + \":00\",\r\n            selectedHour: event.target.value\r\n        });\r\n    }\r\n\r\n    updateMinuteSelected(event) {\r\n        this.setState({\r\n            selectedTime: this.state.selectedHour + \":\" + event.target.value + \":00\",\r\n            selectedMinute: event.target.value\r\n        });\r\n    }\r\n\r\n    updateSelectedTimePeriod(event) {\r\n        this.setState({\r\n            timePeriod: event.target.value,\r\n            selectedTime: event.target.value === \"AM\" ? \"06:00:00\" : \"12:00:00\",\r\n        });\r\n    }\r\n\r\n    triggerSave() {\r\n        if (this.alreadySaving) {\r\n            return;\r\n        }\r\n\r\n        this.alreadySaving = true;\r\n        this.props.onUpdate(this.state.selectedTime);\r\n        this.alreadySaving = false;\r\n    }\r\n\r\n    focus() {\r\n        this.nameInput.focus();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.nameInput.focus();\r\n    }\r\n\r\n    getHourOptions(timePeriod) {\r\n        const start = timePeriod === \"AM\" ? 6 : 12;\r\n        const end = timePeriod === \"AM\" ? 12 : 22;\r\n\r\n        const options = [];\r\n\r\n        for (let i = start; i < end; i++) {\r\n            const time = i < 10 ? \"0\" + i : i;\r\n\r\n            options.push(\r\n                <option key={time} value={time}>\r\n                    {i >= 13 ? (i % 13) + 1 : i}\r\n                </option>\r\n            );\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    // From https://gist.github.com/pstoica/4323d3e6e37e8a23dd59\r\n    handleBlur(event) {\r\n        const currentTarget = event.currentTarget;\r\n\r\n        // Check the newly focused element in the next tick of the event loop\r\n        setTimeout(() => {\r\n            // Check if the new activeElement is a child of the original container\r\n            if (!currentTarget.contains(document.activeElement)) {\r\n                // You can invoke a callback or add custom logic here\r\n                this.triggerSave();\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                tabIndex=\"1\"\r\n                style={{display: \"flex\"}}\r\n                ref={(input) => {\r\n                    this.nameInput = input;\r\n                }}\r\n                onBlur={this.handleBlur}\r\n                onKeyDown={this.triggerSave}\r\n            >\r\n                <select\r\n                    className={\"form-control editor edit-select\"}\r\n                    value={this.state.selectedHour || \"\"}\r\n                    onChange={this.updateHourSelected}\r\n                    onKeyDown={this.triggerSave}\r\n                >\r\n                    {this.getHourOptions(this.state.timePeriod)}\r\n                </select>\r\n                <select\r\n                    className={\"form-control editor edit-select\"}\r\n                    value={this.state.selectedMinute || \"\"}\r\n                    onChange={this.updateMinuteSelected}\r\n                    onKeyDown={this.triggerSave}\r\n                >\r\n                    <option key={\"00\"} value={\"00\"}>\r\n                        00\r\n                    </option>\r\n                    <option key={\"15\"} value={\"15\"}>\r\n                        15\r\n                    </option>\r\n                    <option key={\"30\"} value={\"30\"}>\r\n                        30\r\n                    </option>\r\n                    <option key={\"45\"} value={\"45\"}>\r\n                        45\r\n                    </option>\r\n                </select>\r\n\r\n                <select\r\n                    className={\"form-control editor edit-select\"}\r\n                    value={this.state.timePeriod || \"\"}\r\n                    onChange={this.updateSelectedTimePeriod}\r\n                    onKeyDown={this.triggerSave}\r\n                >\r\n                    <option key={\"AM\"} value={\"AM\"}>\r\n                        AM\r\n                    </option>\r\n                    <option key={\"PM\"} value={\"PM\"}>\r\n                        PM\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TimeEditor;\r\n"]},"metadata":{},"sourceType":"module"}