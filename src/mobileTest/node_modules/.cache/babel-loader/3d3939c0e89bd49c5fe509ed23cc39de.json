{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\wangm1\\\\comp4960-section1-black-team\\\\comp4960-section1-black-team\\\\src\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{BootstrapTable,ButtonGroup,DeleteButton,InsertButton,InsertModalHeader,SearchField,TableHeaderColumn}from'react-bootstrap-table';import'../../../node_modules/react-bootstrap-table/dist/react-bootstrap-table-all.min.css';import $ from'jquery';import Alert from'react-s-alert';var Speakers=/*#__PURE__*/function(_React$Component){_inherits(Speakers,_React$Component);var _super=_createSuper(Speakers);function Speakers(_props){var _this;_classCallCheck(this,Speakers);_this=_super.call(this,_props);_this.createCustomInsertButton=function(){return/*#__PURE__*/React.createElement(InsertButton,{btnText:\"Insert Speaker\",btnContextual:\"btn-success\",className:\"add-speaker-btn\"});};_this.createCustomDeleteButton=function(){return/*#__PURE__*/React.createElement(DeleteButton,{btnText:\"Delete Speaker\",btnContextual:\"btn-danger\",className:\"delete-speaker-btn\"});};_this.createCustomModalHeader=function(){return/*#__PURE__*/React.createElement(InsertModalHeader,{className:\"speaker-modal-header\",title:\"Add Speaker\"});};_this.createCustomButtonGroup=function(props){return/*#__PURE__*/React.createElement(ButtonGroup,{sizeClass:\"btn-group-md\"},props.showSelectedOnlyBtn,props.insertBtn,props.deleteBtn,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-info edit-mode-btn\",onClick:function onClick(){return _this.setState({editMode:!_this.state.editMode});}},_this.state.editMode?\"Exit Edit Mode\":\"Edit Mode\"),_this.state.deletedRows.length>0?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-warning undo-btn\",onClick:_this.onUndo.bind(_assertThisInitialized(_this))},\"Undo Delete\"):null);};_this.createCustomSearchField=function(){return/*#__PURE__*/React.createElement(SearchField,{className:\"speaker-search-field\",style:{height:40}});};_this.tableProps={onAddRow:_this.addRowHook.bind(_assertThisInitialized(_this)),onDeleteRow:_this.deleteRowHook.bind(_assertThisInitialized(_this)),insertBtn:_this.createCustomInsertButton,deleteBtn:_this.createCustomDeleteButton,insertModalHeader:_this.createCustomModalHeader,btnGroup:_this.createCustomButtonGroup,searchField:_this.createCustomSearchField,clearSearch:true,handleConfirmDeleteRow:_this.onConfirmDeleteRow.bind(_assertThisInitialized(_this))};_this.cellEditProps={mode:'click',blurToSave:true,beforeSaveCell:_this.beforeSaveHook.bind(_assertThisInitialized(_this))};_this.getData();_this.state={data:[],editMode:false,deletedRows:[]};return _this;}_createClass(Speakers,[{key:\"getData\",value:function getData(){var _this2=this;return $.ajax({method:\"GET\",url:\"/Speaker/all\",type:\"json\",contentType:\"application/json\",success:function success(response){_this2.setState({data:response});}}).catch(function(xhr,status,error){Alert.error('Unable to load table data.',{position:'top-right',effect:'stackslide',timeout:2000});this.setState({data:[]});});}},{key:\"addRowHook\",value:function addRowHook(row){// Clear our the id field since the backend will auto generate one for us\nrow.id=null;row.isNew=true;this.addRowAjaxCall(row);}// We use this call here when we do not want to delete the row id\n},{key:\"addRowAjaxCall\",value:function addRowAjaxCall(row){var _this3=this;var data=this.state.data;$.ajax({method:\"POST\",url:\"/Speaker/addSpeaker\",data:JSON.stringify(row),type:\"json\",contentType:\"application/json\",success:function success(response){data.push(response);_this3.setState({data:data});Alert.success(\"Speaker added.\",{position:'top-right',effect:'stackslide',timeout:2000});}}).catch(function(xhr,status,error){Alert.error(\"Error saving row.\",{position:'top-right',effect:'stackslide',timeout:2000});});}},{key:\"deleteRowHook\",value:function deleteRowHook(rowIdsToDelete){var _this4=this;var data=this.state.data;var rowsToDelete=data.filter(function(row){return rowIdsToDelete.includes(row.id);});var currentDeletedRows=this.state.deletedRows;currentDeletedRows.push(rowsToDelete);this.setState({deletedRows:currentDeletedRows});$.ajax({method:\"POST\",url:\"/Speaker/deleteSpeaker\",data:JSON.stringify(rowIdsToDelete),type:\"json\",contentType:\"application/json\",success:function success(response){_this4.setState({data:data.filter(function(row){return!rowIdsToDelete.includes(row.id);})});Alert.success(\"Row(s) deleted.\",{position:'top-right',effect:'stackslide',timeout:2000});}}).catch(function(xhr,status,error){Alert.error(\"Error deleting row(s).\",{position:'top-right',effect:'stackslide',timeout:2000});});}},{key:\"beforeSaveHook\",value:function beforeSaveHook(row,cellName,cellValue,done){var mockRow=_objectSpread({},row);mockRow[cellName]=cellValue;$.ajax({method:\"POST\",url:\"/Speaker/updateSpeaker\",data:JSON.stringify(mockRow),type:\"json\",contentType:\"application/json\",success:function success(response){done(true);Alert.success(\"Row updated.\",{position:'top-right',effect:'stackslide',timeout:2000});}}).catch(function(xhr,status,error){Alert.error(\"Error saving row.\",{position:'top-right',effect:'stackslide',timeout:2000});done(false);});return 1;}},{key:\"onConfirmDeleteRow\",value:function onConfirmDeleteRow(next,dropRowKeys){next();}},{key:\"onUndo\",value:function onUndo(){var _this5=this;// When we undo, add back the deleted rows\nvar deletedRows=this.state.deletedRows.pop();deletedRows.forEach(function(row){return _this5.addRowAjaxCall(row);});}},{key:\"getClassNameForDuplicateSpeakers\",value:function getClassNameForDuplicateSpeakers(cell,row,rowIndex,columnIndex){if(!!row[\"speakerName\"]){return this.state.data.filter(function(tableRow){return tableRow[\"speakerName\"]===row[\"speakerName\"]&&!row[\"email\"]&&!tableRow[\"email\"];}).length>=2?\"duplicate-speaker-name\":\"\";}}},{key:\"cannotBeEmptyValidator\",value:function cannotBeEmptyValidator(value,row){var response={isValid:true,notification:{type:'success',msg:'',title:''}};if(!value){response.isValid=false;response.notification.type='error';response.notification.msg='Speaker name must be inserted';response.notification.title='Requested Value';}return response;}},{key:\"emailValidator\",value:function emailValidator(value,row){var response={isValid:true,notification:{type:'success',msg:'',title:''}};var re=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;if(!String(value).match(re)&&!!value){response.isValid=false;response.notification.type='error';response.notification.msg='Email entered was not valid';response.notification.title='Invalid Entry';}return response;}},{key:\"phoneNumberValidator\",value:function phoneNumberValidator(value,row){var response={isValid:true,notification:{type:'success',msg:'',title:''}};var re=/^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;if(!String(value).match(re)&&!!value){response.isValid=false;response.notification.type='error';response.notification.msg='Number entered was not valid';response.notification.title='Invalid Entry';}return response;}},{key:\"phoneNumberFormatter\",value:function phoneNumberFormatter(value){// Returns empty if there is no number\nif(!value){return value;}// Removes all non-number characters from the number string\nvar formattedValue=\"\";for(var i=0;i<value.length;i++){if(value[i]>='0'&&value[i]<='9'){formattedValue+=value[i];}}// Creates a new formatted version of edited phone number\nreturn'('+formattedValue.slice(0,3)+') '+formattedValue.slice(3,6)+'-'+formattedValue.slice(6,10);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Speakers\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(BootstrapTable,{hover:true,condensed:true,data:this.state.data,search:true,version:\"4\",insertRow:true,deleteRow:true,selectRow:{mode:'checkbox'},options:this.tableProps,cellEdit:this.state.editMode?this.cellEditProps:{}},/*#__PURE__*/React.createElement(TableHeaderColumn,{hidden:true,hiddenOninsert:true,autoValue:true,isKey:true,dataField:\"id\"},\"id\"),/*#__PURE__*/React.createElement(TableHeaderColumn,{dataField:\"speakerName\",editable:{validator:this.cannotBeEmptyValidator},columnClassName:this.getClassNameForDuplicateSpeakers.bind(this)},\"Speaker Name\"),/*#__PURE__*/React.createElement(TableHeaderColumn,{dataField:\"email\",editable:{validator:this.emailValidator}},\"Email\"),/*#__PURE__*/React.createElement(TableHeaderColumn,{dataField:\"everydayNumber\",dataFormat:this.phoneNumberFormatter,editable:{validator:this.phoneNumberValidator}},\"Everyday Number\"),/*#__PURE__*/React.createElement(TableHeaderColumn,{dataField:\"dayOfNumber\",dataFormat:this.phoneNumberFormatter,editable:{validator:this.phoneNumberValidator}},\"Day Of Number\"))));}}]);return Speakers;}(React.Component);export default Speakers;","map":{"version":3,"sources":["C:/Users/wangm1/comp4960-section1-black-team/comp4960-section1-black-team/src/client/src/pages/speakers/Speakers.js"],"names":["React","BootstrapTable","ButtonGroup","DeleteButton","InsertButton","InsertModalHeader","SearchField","TableHeaderColumn","$","Alert","Speakers","props","createCustomInsertButton","createCustomDeleteButton","createCustomModalHeader","createCustomButtonGroup","showSelectedOnlyBtn","insertBtn","deleteBtn","setState","editMode","state","deletedRows","length","onUndo","bind","createCustomSearchField","height","tableProps","onAddRow","addRowHook","onDeleteRow","deleteRowHook","insertModalHeader","btnGroup","searchField","clearSearch","handleConfirmDeleteRow","onConfirmDeleteRow","cellEditProps","mode","blurToSave","beforeSaveCell","beforeSaveHook","getData","data","ajax","method","url","type","contentType","success","response","catch","xhr","status","error","position","effect","timeout","row","id","isNew","addRowAjaxCall","JSON","stringify","push","rowIdsToDelete","rowsToDelete","filter","includes","currentDeletedRows","cellName","cellValue","done","mockRow","next","dropRowKeys","pop","forEach","cell","rowIndex","columnIndex","tableRow","value","isValid","notification","msg","title","re","String","match","formattedValue","i","slice","validator","cannotBeEmptyValidator","getClassNameForDuplicateSpeakers","emailValidator","phoneNumberFormatter","phoneNumberValidator","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {\r\n  BootstrapTable,\r\n  ButtonGroup,\r\n  DeleteButton,\r\n  InsertButton,\r\n  InsertModalHeader,\r\n  SearchField,\r\n  TableHeaderColumn\r\n} from 'react-bootstrap-table';\r\nimport '../../../node_modules/react-bootstrap-table/dist/react-bootstrap-table-all.min.css';\r\nimport $ from 'jquery';\r\nimport Alert from 'react-s-alert';\r\n\r\nclass Speakers extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getData();\r\n        this.state = {\r\n            data: [],\r\n            editMode: false,\r\n            deletedRows: []\r\n        };\r\n    }\r\n\r\n    getData() {\r\n        return $.ajax({\r\n            method: \"GET\",\r\n            url: \"/Speaker/all\",\r\n            type: \"json\",\r\n            contentType: \"application/json\",\r\n            success: (response) => {\r\n                this.setState({\r\n                    data: response\r\n                });\r\n            }\r\n        }).catch(function (xhr, status, error) {\r\n            Alert.error('Unable to load table data.', {\r\n                position: 'top-right',\r\n                effect: 'stackslide',\r\n                timeout: 2000\r\n            });\r\n\r\n            this.setState({\r\n                data: []\r\n            });\r\n        });\r\n    }\r\n\r\n    addRowHook(row) {\r\n        // Clear our the id field since the backend will auto generate one for us\r\n        row.id = null;\r\n        row.isNew = true;\r\n        this.addRowAjaxCall(row);\r\n    }\r\n\r\n    // We use this call here when we do not want to delete the row id\r\n    addRowAjaxCall(row) {\r\n        const data = this.state.data;\r\n\r\n        $.ajax({\r\n            method: \"POST\",\r\n            url: \"/Speaker/addSpeaker\",\r\n            data: JSON.stringify(row),\r\n            type: \"json\",\r\n            contentType: \"application/json\",\r\n            success: (response) => {\r\n                data.push(response);\r\n                this.setState({\r\n                    data: data\r\n                });\r\n                Alert.success(\"Speaker added.\", {\r\n                    position: 'top-right',\r\n                    effect: 'stackslide',\r\n                    timeout: 2000\r\n                });\r\n            }\r\n        }).catch(function (xhr, status, error) {\r\n            Alert.error(\"Error saving row.\", {\r\n                position: 'top-right',\r\n                effect: 'stackslide',\r\n                timeout: 2000\r\n            });\r\n        });\r\n    }\r\n\r\n    deleteRowHook(rowIdsToDelete) {\r\n        const data = this.state.data;\r\n        const rowsToDelete = data.filter((row) => rowIdsToDelete.includes(row.id));\r\n\r\n        const currentDeletedRows = this.state.deletedRows;\r\n        currentDeletedRows.push(rowsToDelete);\r\n\r\n        this.setState({deletedRows: currentDeletedRows});\r\n\r\n        $.ajax({\r\n            method: \"POST\",\r\n            url: \"/Speaker/deleteSpeaker\",\r\n            data: JSON.stringify(rowIdsToDelete),\r\n            type: \"json\",\r\n            contentType: \"application/json\",\r\n            success: (response) => {\r\n                this.setState({data: data.filter((row) => !rowIdsToDelete.includes(row.id))});\r\n\r\n                Alert.success(\"Row(s) deleted.\", {\r\n                    position: 'top-right',\r\n                    effect: 'stackslide',\r\n                    timeout: 2000\r\n                });\r\n            }\r\n        }).catch(function (xhr, status, error) {\r\n            Alert.error(\"Error deleting row(s).\", {\r\n                position: 'top-right',\r\n                effect: 'stackslide',\r\n                timeout: 2000\r\n            });\r\n        });\r\n    }\r\n\r\n    beforeSaveHook(row, cellName, cellValue, done) {\r\n        let mockRow = {...row};\r\n        mockRow[cellName] = cellValue;\r\n        $.ajax({\r\n            method: \"POST\",\r\n            url: \"/Speaker/updateSpeaker\",\r\n            data: JSON.stringify(mockRow),\r\n            type: \"json\",\r\n            contentType: \"application/json\",\r\n            success: (response) => {\r\n                done(true);\r\n                Alert.success(\"Row updated.\", {\r\n                    position: 'top-right',\r\n                    effect: 'stackslide',\r\n                    timeout: 2000\r\n                });\r\n            }\r\n        }).catch(function (xhr, status, error) {\r\n            Alert.error(\"Error saving row.\", {\r\n                position: 'top-right',\r\n                effect: 'stackslide',\r\n                timeout: 2000\r\n            });\r\n            done(false);\r\n        });\r\n\r\n        return 1;\r\n    }\r\n\r\n    onConfirmDeleteRow(next, dropRowKeys) {\r\n        next();\r\n    }\r\n\r\n    onUndo() {\r\n        // When we undo, add back the deleted rows\r\n        const deletedRows = this.state.deletedRows.pop();\r\n        deletedRows.forEach((row) => this.addRowAjaxCall(row));\r\n    }\r\n\r\n    getClassNameForDuplicateSpeakers(cell, row, rowIndex, columnIndex) {\r\n        if (!!row[\"speakerName\"]) {\r\n          return this.state.data.filter(\r\n              (tableRow) =>\r\n                  tableRow[\"speakerName\"] === row[\"speakerName\"] && !row[\"email\"] && !tableRow[\"email\"]\r\n          ).length >= 2\r\n              ? \"duplicate-speaker-name\"\r\n              : \"\";\r\n        }\r\n    }\r\n\r\n    cannotBeEmptyValidator(value, row) {\r\n        const response = {isValid: true, notification: {type: 'success', msg: '', title: ''}};\r\n        if (!value) {\r\n            response.isValid = false;\r\n            response.notification.type = 'error';\r\n            response.notification.msg = 'Speaker name must be inserted';\r\n            response.notification.title = 'Requested Value';\r\n        }\r\n        return response;\r\n    }\r\n\r\n    emailValidator(value, row) {\r\n        const response = {isValid: true, notification: {type: 'success', msg: '', title: ''}};\r\n        const re = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n        if (!(String(value).match(re)) && !!value) {\r\n            response.isValid = false;\r\n            response.notification.type = 'error';\r\n            response.notification.msg = 'Email entered was not valid';\r\n            response.notification.title = 'Invalid Entry';\r\n        }\r\n        return response;\r\n    }\r\n\r\n    phoneNumberValidator(value, row) {\r\n        const response = {isValid: true, notification: {type: 'success', msg: '', title: ''}};\r\n        const re = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\r\n        if (!(String(value).match(re)) && !!value) {\r\n            response.isValid = false;\r\n            response.notification.type = 'error';\r\n            response.notification.msg = 'Number entered was not valid';\r\n            response.notification.title = 'Invalid Entry';\r\n        }\r\n        return response;\r\n    }\r\n\r\n    phoneNumberFormatter(value) {\r\n        // Returns empty if there is no number\r\n        if (!value) {\r\n            return value;\r\n        }\r\n        // Removes all non-number characters from the number string\r\n        let formattedValue = \"\";\r\n        for (let i = 0; i < value.length; i++) {\r\n            if(value[i] >= '0' && value[i] <= '9') {\r\n                formattedValue += value[i];\r\n            }\r\n        }\r\n        // Creates a new formatted version of edited phone number\r\n        return ('(' + formattedValue.slice(0, 3) + ') ' + formattedValue.slice(3, 6) + '-' + formattedValue.slice(6, 10));\r\n    } \r\n\r\n    createCustomInsertButton = () => {\r\n      return (\r\n        <InsertButton\r\n          btnText='Insert Speaker'\r\n          btnContextual='btn-success'\r\n          className='add-speaker-btn'/>\r\n      );\r\n    };\r\n\r\n    createCustomDeleteButton = () =>{\r\n      return (\r\n        <DeleteButton\r\n          btnText='Delete Speaker'\r\n          btnContextual='btn-danger'\r\n          className='delete-speaker-btn'/>\r\n      );\r\n    };\r\n\r\n    createCustomModalHeader = () => {\r\n      return (\r\n        <InsertModalHeader\r\n          className='speaker-modal-header'\r\n          title='Add Speaker'/>\r\n      );\r\n    };\r\n\r\n    createCustomButtonGroup = props => {\r\n        return (\r\n            <ButtonGroup sizeClass='btn-group-md'>\r\n                {props.showSelectedOnlyBtn}\r\n                {props.insertBtn}\r\n                {props.deleteBtn}\r\n                <button type='button'\r\n                        className={`btn btn-info edit-mode-btn`}\r\n                        onClick={() => this.setState({editMode: !this.state.editMode})}>\r\n                    {this.state.editMode ? \"Exit Edit Mode\" : \"Edit Mode\"}\r\n                </button>\r\n                {this.state.deletedRows.length > 0 ?\r\n                    <button type='button'\r\n                            className={`btn btn-warning undo-btn`}\r\n                            onClick={this.onUndo.bind(this)}>\r\n                        Undo Delete\r\n                    </button> : null}\r\n            </ButtonGroup>\r\n        );\r\n    };\r\n\r\n    createCustomSearchField = () => {\r\n        return (\r\n          <SearchField\r\n              className='speaker-search-field'\r\n              style={ { height: 40 } }/>\r\n        );\r\n      };\r\n\r\n    tableProps = {\r\n        onAddRow: this.addRowHook.bind(this),\r\n        onDeleteRow: this.deleteRowHook.bind(this),\r\n        insertBtn: this.createCustomInsertButton,\r\n        deleteBtn: this.createCustomDeleteButton,\r\n        insertModalHeader: this.createCustomModalHeader,\r\n        btnGroup: this.createCustomButtonGroup,\r\n        searchField: this.createCustomSearchField,\r\n        clearSearch: true,\r\n        handleConfirmDeleteRow: this.onConfirmDeleteRow.bind(this)\r\n    };\r\n\r\n    cellEditProps = {\r\n        mode: 'click',\r\n        blurToSave: true,\r\n        beforeSaveCell: this.beforeSaveHook.bind(this)\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"card\">\r\n                    <div className=\"card-header\">\r\n                        <h3>Speakers</h3>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <BootstrapTable hover\r\n                                    condensed\r\n                                    data={this.state.data}\r\n                                    search\r\n                                    version='4'\r\n                                    insertRow\r\n                                    deleteRow\r\n                                    selectRow={{mode: 'checkbox'}}\r\n                                    options={this.tableProps}\r\n                                    cellEdit={this.state.editMode ? this.cellEditProps : {}}>\r\n                        <TableHeaderColumn hidden\r\n                                           hiddenOninsert\r\n                                           autoValue\r\n                                           isKey\r\n                                           dataField='id'>id</TableHeaderColumn>\r\n                        <TableHeaderColumn dataField='speakerName'\r\n                                           editable={{validator: this.cannotBeEmptyValidator}}\r\n                                           columnClassName={this.getClassNameForDuplicateSpeakers.bind(this)}>Speaker Name</TableHeaderColumn>\r\n                        <TableHeaderColumn dataField='email'\r\n                                           editable={{validator: this.emailValidator}}>Email</TableHeaderColumn>\r\n                        <TableHeaderColumn dataField='everydayNumber'\r\n                                           dataFormat={ this.phoneNumberFormatter }\r\n                                           editable={{validator: this.phoneNumberValidator}}>Everyday Number</TableHeaderColumn>\r\n                        <TableHeaderColumn dataField='dayOfNumber'\r\n                                           dataFormat={ this.phoneNumberFormatter }\r\n                                           editable={{validator: this.phoneNumberValidator}}>Day Of Number</TableHeaderColumn>\r\n                    </BootstrapTable>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Speakers\r\n"]},"metadata":{},"sourceType":"module"}